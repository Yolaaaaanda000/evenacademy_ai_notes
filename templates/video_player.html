<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Learning Platform - Knowledge Point Tags</title>
    <link rel="stylesheet" href="/static/style_video_player.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1> Video Review Platform</h1>
            <p>Turn any video into a dynamic study guide with AI-powered notes, practice, and Q&A.</p>
            <nav class="main-nav">
                <a href="/" class="nav-link active">ğŸ¬ Start Review</a>
            </nav>
        </header>
        
        <main>
            <!-- Video Upload Section -->
            <div id="upload-section" class="upload-section">
                <div class="upload-container">
                    <h2>ğŸ“ Upload Video File</h2>
                    <div class="upload-area">
                        <label for="video-file" class="upload-label">
                            <div class="upload-icon">ğŸ“</div>
                            <span>Click to select video file</span>
                            <small>Supports MP4, MOV, AVI, MKV formats</small>
                        </label>
                        <input type="file" id="video-file" name="video_file" accept=".mp4,.mov,.avi,.mkv" hidden>
                    </div>
                    
                    <div class="video-info" id="video-info" style="display: none;">
                        <div class="info-item">
                            <label for="video-title">Video Title:</label>
                            <input type="text" id="video-title" name="title" placeholder="e.g., Math Course - Linear Algebra Basics">
                        </div>
                        <div class="info-item">
                            <label for="video-language">Output Language:</label>
                            <select id="video-language" name="language">
                                <option value="English" selected>English</option>
                                <option value="ä¸­æ–‡">Chinese</option>
                            </select>
                        </div>
                        <button id="process-video-btn" class="primary-btn">ğŸš€ Start Video Analysis</button>
                    </div>
                </div>
                
                <div id="processing-status" class="processing-status" style="display: none;">
                    <div class="processing-header">
                        <h3 class="processing-title">ğŸ¬ Analyzing Video Content</h3>
                        <p class="processing-subtitle">AI is intelligently identifying knowledge points in the video, please wait...</p>
                    </div>
                    
                    <div class="processing-animation">
                        <div class="loader"></div>
                        <div class="processing-dots">
                            <div class="processing-dot"></div>
                            <div class="processing-dot"></div>
                            <div class="processing-dot"></div>
                        </div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    
                    <div class="processing-steps" id="processing-steps">
                        <div class="processing-step" data-step="transcribe">
                            <div class="step-icon pending">1</div>
                            <div class="step-content">
                                <div class="step-title">Speech Transcription</div>
                                <div class="step-description">Converting video audio to text...</div>
                            </div>
                        </div>
                        <div class="processing-step" data-step="analyze">
                            <div class="step-icon pending">2</div>
                            <div class="step-content">
                                <div class="step-title">Content Analysis</div>
                                <div class="step-description">AI is identifying important knowledge points and content segments...</div>
                            </div>
                        </div>
                        <div class="processing-step" data-step="timestamp">
                            <div class="step-icon pending">3</div>
                            <div class="step-content">
                                <div class="step-title">Precise Timestamp Matching</div>
                                <div class="step-description">Precisely locating time based on key sentences...</div>
                            </div>
                        </div>
                        <div class="processing-step" data-step="generate">
                            <div class="step-icon pending">4</div>
                            <div class="step-content">
                                <div class="step-title">Generate Notes</div>
                                <div class="step-description">Generating structured notes...</div>
                            </div>
                        </div>
                    </div>
                    
                    <p id="status-text">Processing, please wait patiently...</p>
                    <p class="processing-time" id="processing-time">Time used: 0 seconds</p>
                </div>
            </div>
            
            <!-- è§†é¢‘æ’­æ”¾å’ŒçŸ¥è¯†ç‚¹åŒºåŸŸ -->
            <div id="player-section" class="player-section" style="display: none;">
                <div class="player-container">
                    <!-- å·¦ä¾§è§†é¢‘æ’­æ”¾å™¨ -->
                    <div class="video-panel">
                        <div class="video-header">
                            <h3 id="video-title-display">Video Title</h3>
                            <!-- <div class="video-controls">
                                <button id="fullscreen-btn" class="control-btn" title="Fullscreen">â›¶</button>
                            </div> -->
                        </div>
                        <div class="video-wrapper">
                            <video id="video-player" controls>
                                <source id="video-source" src="" type="video/mp4">
                                Your browser does not support video playback.
                            </video>
                        </div>

                    </div>
                    
                   <!-- å³ä¾§çŸ¥è¯†ç‚¹é¢æ¿ - å¢å¼ºç‰ˆæœ¬ -->
                    <div class="knowledge-panel">
                        <div class="panel-header">
                            <h3 id="panel-title">ğŸ¯ Knowledge Point Tags</h3>
                                                    <div class="panel-controls">
                            <button id="auto-scroll-btn" class="control-btn active" title="Auto Scroll">ğŸ“Œ</button>
                            <!-- ğŸ†• æ·»åŠ è§†å›¾åˆ‡æ¢æŒ‰é’® -->
                            <button id="view-toggle-btn" class="control-btn" title="Switch to Summary View">ğŸ“š</button>
                            <button id="filter-btn" class="control-btn" title="Filter">ğŸ”</button>
                        </div>
                        </div>
                        
                        <div class="knowledge-content">
                            <!-- ğŸ†• çŸ¥è¯†ç‚¹åˆ—è¡¨è§†å›¾ (é»˜è®¤æ˜¾ç¤º) -->
                            <div id="knowledge-list-view" class="view-content">
                                <div id="knowledge-list" class="knowledge-list">
                                    <!-- ç°æœ‰çš„çŸ¥è¯†ç‚¹åˆ—è¡¨ -->
                                </div>
                                
                                <div id="knowledge-summary" class="knowledge-summary">
                                    <h4 id="summary-title">ğŸ“‹ Content Summary</h4>
                                    <div id="summary-content" class="summary-content">
                                        <!-- ç°æœ‰çš„æ‘˜è¦å†…å®¹ -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ğŸ†• Summaryè¯¦ç»†è§†å›¾ (ç‚¹å‡»åˆ‡æ¢æ˜¾ç¤º) -->
                            <div id="summary-detail-view" class="view-content" style="display: none;">
                                <div class="summary-header">
                                    <div class="summary-stats">
                                        <span>ğŸ¯ <span id="concept-count-summary">0</span><span id="concept-count-text"> knowledge points</span></span>
                                        <span>â±ï¸ <span id="video-duration-summary">00:00</span></span>
                                        <span>ğŸ“Š <span id="difficulty-level">Medium</span></span>
                                    </div>
                                </div>
                                
                                <div class="detailed-summary-content" id="detailed-summary-content">
                                    <!-- è¯¦ç»†Summaryå†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                                    <div class="empty-summary">
                                        <p id="empty-summary-text">ğŸ“¤ The complete course summary will be displayed after processing the video</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                <!-- åº•éƒ¨æ“ä½œåŒºåŸŸ -->
                <div class="bottom-actions">
                    <div class="action-buttons">
                        <button id="export-notes-btn" class="secondary-btn">ğŸ“š Export Summary</button>
                        <button id="export-timestamps-btn" class="secondary-btn">â±ï¸ Export Timestamps</button>
                        <button id="share-btn" class="secondary-btn">ğŸ“¤ Share</button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- ğŸ†• AIå¯¹è¯åŒºåŸŸ - ä¸é¡µé¢å®½åº¦ä¸€è‡´ -->
        <div class="ai-dialogue-section">
            <div class="dialogue-header">
                <h3>ğŸ¤– AI Learning Assistant</h3>
                <div class="dialogue-controls">
                    <button id="toggle-dialogue-btn" class="control-btn" title="Expand/Collapse Dialogue Box">ğŸ’¬</button>
                    <button id="clear-dialogue-btn" class="control-btn" title="Clear Chat">ğŸ—‘ï¸</button>
                </div>
            </div>
            
            <div class="dialogue-container" id="dialogue-container" style="display: none;">
                <div class="dialogue-messages" id="dialogue-messages">
                    <div class="message ai-message">
                        <div class="message-content">
                            <div class="message-header">
                                <span class="ai-avatar">ğŸ¤–</span>
                                <span class="message-time" id="current-time-display">Just now</span>
                            </div>
                            <div class="message-text">
                                Hello! I am your AI learning assistant. I can help you:
                                <br>â€¢ Explain knowledge points in the video
                                <br>â€¢ Answer questions about the course content
                                <br>â€¢ Provide learning suggestions and review guidance
                                <br><br>Please tell me what you want to know?
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dialogue-input-area">
                    <div class="input-container">
                        <textarea 
                            id="dialogue-input" 
                            placeholder="Enter your question or idea..." 
                            rows="3"
                            maxlength="500"
                        ></textarea>
                        <div class="input-actions">
                            <span class="char-count" id="char-count">0/500</span>
                            <button id="send-dialogue-btn" class="send-btn" disabled>Send</button>
                        </div>
                    </div>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="askQuestion('explain')">ğŸ’¬ Explain Knowledge Points</button>
                        <button class="quick-btn" onclick="askQuestion('summary')">ğŸ“š Summarize Key Points</button>
                        <button class="quick-btn" onclick="askQuestion('practice')">ğŸ“ Generate Exercises</button>
                        <button class="quick-btn" onclick="askQuestion('review')">ğŸ”„ Review Suggestions</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- <footer>
            <div class="feature-info">
                <h3>âœ¨ Feature Highlights</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ¯ Intelligent Recognition</h4>
                        <p>AI automatically identifies key knowledge points in the video</p>
                        <span class="feature-tag">AI-Driven</span>
                    </div>
                    <div class="feature-card">
                        <h4>â° Precise Timestamps</h4>
                        <p>Accurately locates the time position of knowledge points in the video</p>
                        <span class="feature-tag">Accurate Location</span>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸ”„ Knowledge Point Exercises</h4>
                        <p>Accurately provides exercise questions to strengthen understanding</p>
                        <span class="feature-tag">Knowledge Point Smart Push</span>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸ“± Guided Explanations</h4>
                        <p>Guided explanations of knowledge points to deepen understanding</p>
                        <span class="feature-tag">Guided Explanations</span>
                    </div>
                </div>
            </div>
        </footer> -->
    </div>

    <!-- ğŸ†• é¢˜ç›®å¼¹çª— (å·²æ³¨é‡Š - ä½¿ç”¨ç‹¬ç«‹çš„ practice_dialog.html æ›¿ä»£)
    <div id="question-dialogue-modal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>ğŸ¯ Intelligent Learning Assistant</h3>
                <button class="close-btn" onclick="closeQuestionDialogue()">Ã—</button>
            </div>
            
            <div class="modal-content">
             <!-- å·¦ä¾§é¢˜ç›®åŒºåŸŸ
                <div class="question-panel">
                    <div class="question-header">
                        <div class="question-meta">
                            <span class="knowledge-point" id="question-knowledge-point">Knowledge Point: Probability Theory</span>
                            <span class="difficulty" id="question-difficulty">Difficulty: Medium</span>
                            <span class="question-number" id="question-number">Question No: #001</span>
                        </div>
                        <div class="question-controls">
                            <button class="control-btn" onclick="getHint()" title="Get Hint">ğŸ’¡ Hint</button>
                            <button class="control-btn" onclick="loadNextQuestion()" title="Next Question">â­ï¸ Next Question</button>
                        </div>
                    </div>
                    
                    <div class="question-content">
                        <div id="question-text" class="question-text">
                            <!-- é¢˜ç›®å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º 
                        </div>
                        
                        <div id="question-options" class="question-options">
                            <!-- é€‰é¡¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º 
                        </div>
                        
                        <div class="answer-input-section">
                            <input type="text" id="answer-input" placeholder="Enter your answer (A/B/C/D/E)" class="answer-input">
                            <button id="submit-answer-btn" class="submit-btn">ğŸ“¤ Submit Answer</button>
                        </div>
                    </div>
                </div>
                
                <!-- å³ä¾§å¯¹è¯çª—å£  
                <div class="dialogue-panel">
                    <div class="dialogue-header">
                        <h4>ğŸ¤– AI Learning Assistant</h4>
                        <div class="dialogue-status" id="dialogue-status">Preparing to start learning...</div>
                    </div>
                    
                    <div class="dialogue-content">
                        <div id="dialogue-history" class="dialogue-history">
                            <!-- å¯¹è¯å†å²å°†åœ¨è¿™é‡Œæ˜¾ç¤º 
                        </div>
                        
                        <div class="dialogue-actions">
                            <button id="finish-dialogue-btn" class="action-btn" style="display: none;">âœ… Finish Learning</button>
                            <button id="next-question-btn" class="action-btn" style="display: none;">â­ï¸ Next Question</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    -->

    <script src="/static/script_video_player.js"></script>
</body>
</html> 